(this.webpackJsonpsnts=this.webpackJsonpsnts||[]).push([[0],{102:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__3aeho",posts:"MyPosts_posts__2Byu-"}},103:function(e,t,n){e.exports={header:"Header_header__39XS2",authBlock:"Header_authBlock__3JFA1"}},135:function(e,t,n){e.exports={Dialogs:"DialogItem_Dialogs__2c_QI",DialogsItems:"DialogItem_DialogsItems__3zAIO",dialog:"DialogItem_dialog__1wSkF"}},136:function(e,t,n){e.exports={messages:"MessageItem_messages__1BV8S"}},142:function(e,t,n){e.exports={content:"Profile_content__6pham"}},143:function(e,t,n){e.exports={item:"Post_item__3c7es"}},15:function(e,t,n){e.exports={nav:"Nav_nav__3FUyC",item:"Nav_item__3iLxv",activeLink:"Nav_activeLink__V6QwG"}},176:function(e,t,n){},177:function(e,t,n){},301:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),a=n(70),i=n.n(a),c=(n(176),n(33)),o=n(34),u=n(38),l=n(36),d=(n(177),n(15)),j=n.n(d),p=n(14),b=n(1),f=function(){return Object(b.jsxs)("nav",{className:j.a.nav,children:[Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/login",activeClassName:j.a.activeLink,children:"Login"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/profile",activeClassName:j.a.activeLink,children:"Profile"})}),Object(b.jsx)("div",{className:"".concat(j.a.item," ").concat(j.a.active),children:Object(b.jsx)(p.b,{to:"/dialogs",activeClassName:j.a.activeLink,children:"Messages"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/news",activeClassName:j.a.activeLink,children:"News"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/music",activeClassName:j.a.activeLink,children:"Music"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/settings",activeClassName:j.a.activeLink,children:"Settings"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/friends",activeClassName:j.a.activeLink,children:"Friends"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:"/users",activeClassName:j.a.activeLink,children:"Users"})})]})},h=n(10),O=n(37),g=n(3),m={dialogs:[{id:1,name:"Alex"},{id:2,name:"Kate"},{id:3,name:"Bob"},{id:4,name:"Michael"},{id:5,name:"Kostya"}],messages:[{id:1,message:"Hi there"},{id:2,message:"Hello bud"},{id:3,message:"Howdy"},{id:4,message:"Greetings!"},{id:5,message:"Did you sign up for Stalker 2?"}]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialog/SEND_MESSAGE":var n=t.newDialogMessage;return Object(g.a)(Object(g.a)({},e),{},{messages:[].concat(Object(O.a)(e.messages),[{id:6,message:n}])});default:return e}},x=n(59),_=n.n(x),S=n(135),C=n.n(S),w=function(e){var t="/dialogs/".concat(e.id);return Object(b.jsx)("div",{className:C.a.dialog,children:Object(b.jsxs)(p.b,{to:t,children:[" ",e.name]})})},P=n(136),U=n.n(P),T=function(e){return Object(b.jsx)("div",{className:U.a.message,children:e.message})},y=n(302),N=n(132),I=n(133),A=n(28),k=n(49),E=n.n(k),F=function(e){e.input;var t=e.meta,n=t.touched,s=t.error,r=e.children,a=(Object(A.a)(e,["input","meta","children"]),n&&s);return Object(b.jsxs)("div",{className:E.a.formControl+" "+(a?E.a.error:""),children:[Object(b.jsx)("div",{children:r}),a&&Object(b.jsx)("div",{className:E.a.errorMessage,children:s})]})},D=function(e){var t=e.input,n=(e.meta,e.children,Object(A.a)(e,["input","meta","children"]));return Object(b.jsx)(F,Object(g.a)(Object(g.a)({},e),{},{children:Object(b.jsx)("textarea",Object(g.a)(Object(g.a)({},t),n))}))},L=function(e){var t=e.input,n=(e.meta,e.children,Object(A.a)(e,["input","meta","children"]));return Object(b.jsx)(F,Object(g.a)(Object(g.a)({},e),{},{children:Object(b.jsx)("input",Object(g.a)(Object(g.a)({},t),n))}))},M=function(e){if(!e){var t="The field is empty";return console.log(t),t}},R=function(e){return function(t){if(!(t&&t.toString().length<=e)){var n="".concat(e," is a max number of symbols here");return console.log(n),n}}},z=function(e){var t=e.dialogsPage.dialogs.map((function(e){return Object(b.jsx)(w,{name:e.name,id:e.id},Object(y.a)())})),n=e.dialogsPage.messages.map((function(e){return Object(b.jsx)(T,{message:e.message,id:e.id},Object(y.a)())}));return Object(b.jsxs)("div",{className:_.a.Dialogs,children:[Object(b.jsx)("div",{className:_.a.DialogsItems+""+_.a.active,children:t}),Object(b.jsxs)("div",{className:_.a.messages,children:[Object(b.jsx)("div",{children:n}),Object(b.jsx)("div",{children:Object(b.jsx)(W,{onSubmit:function(t){e.sendMessage(t.newDialogMessage)}})})]})]})},B=R(10),W=Object(I.a)({form:"dialogAddMessageForm"})((function(e){return Object(b.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(b.jsx)("div",{children:Object(b.jsx)(N.a,{placeholder:"insert your message",name:"newDialogMessage",component:D,validate:[M,B]})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{children:"Send"})})]})})),H=n(11),G=n(9),q=function(e){return{isAuth:e.authSetting.isAuth}};function V(e){return Object(H.b)(q,{})((function(t){t.isAuth;var n=Object(A.a)(t,["isAuth"]);return t.isAuth?Object(b.jsx)(e,Object(g.a)({},n)):Object(b.jsx)(h.a,{to:"/login"})}))}var J=Object(G.d)(Object(H.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{sendMessage:function(t){e(function(e){return{type:"dialog/SEND_MESSAGE",newDialogMessage:e}}(t))}}})),V)(z),K=n(12),X=n.n(K),Y=n(22),Z=n(138),Q=n.n(Z),$=n.p+"static/media/avatar.109c6aff.jpg",ee=Q.a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"ae005362-3cd1-4901-a9c5-790f2698eec1"}}),te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ee.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)+(null===s?"":"".concat(s))).then((function(e){return e.data}))},ne=function(e){return se.getProfile(e)},se={getProfile:function(e){return ee.get("profile/"+e).then((function(e){return e.data}))},getStatus:function(e){return ee.get("profile/status/"+e).then((function(e){return e.data}))},updateStatus:function(e){return ee.put("profile/status/",{status:e}).then((function(e){return e.data}))},updatePhoto:function(){return ee.put("profile/photo/",{image:$}).then((function(e){return e.data}))}},re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ee.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},ae=function(){return ee.get("auth/me").then((function(e){return e.data}))},ie=function(){return ee.delete("auth/login")},ce={users:[],pageSize:8,totalUsersAmount:0,currentPage:1,isFetching:!1,followedUsersId:[],filter:{term:"",friend:null}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/FOLLOW":return Object(g.a)(Object(g.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(g.a)(Object(g.a)({},e),{},{followed:!0}):e}))});case"users/UNFOLLOW":return Object(g.a)(Object(g.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(g.a)(Object(g.a)({},e),{},{followed:!1}):e}))});case"users/SET_USERS":return Object(g.a)(Object(g.a)({},e),{},{users:t.users});case"users/SET_FILTER":return Object(g.a)(Object(g.a)({},e),{},{filter:t.payload});case"users/SET_CURRENT_PAGE":return Object(g.a)(Object(g.a)({},e),{},{currentPage:t.currentPage});case"users/SET_TOTAL_USERS_AMOUNT":return Object(g.a)(Object(g.a)({},e),{},{totalUsersAmount:t.totalAmount});case"users/SWITCH_PRELOADER":return Object(g.a)(Object(g.a)({},e),{},{isFetching:t.isFetching});case"users/SWITCH_IS_FOLLOW":return Object(g.a)(Object(g.a)({},e),{},{followedUsersId:t.isFetching?[].concat(Object(O.a)(e.followedUsersId),[t.id]):e.followedUsersId.filter((function(e){return e!==t.id}))});default:return e}},ue=function(e){return{type:"users/FOLLOW",userID:e}},le=function(e){return{type:"users/UNFOLLOW",userID:e}},de=function(e){return{type:"users/SET_CURRENT_PAGE",currentPage:e}},je=function(e){return{type:"users/SWITCH_PRELOADER",isFetching:e}},pe=function(e,t){return{type:"users/SWITCH_IS_FOLLOW",id:e,isFetching:t}},be=function(e){return{type:"users/SET_FILTER",payload:e}},fe=n(60),he=function(e){return{}},Oe=r.a.memo((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(fe.c,{initialValues:{term:"",friend:null},validate:he,onSubmit:function(t,n){var s=n.setSubmitting;e.onFilterChanged(t),s(!1)},children:function(e){var t=e.isSubmitting;return Object(b.jsxs)(fe.b,{children:[Object(b.jsx)(fe.a,{type:"text",name:"term"}),Object(b.jsxs)(fe.a,{name:"friend",as:"select",children:[Object(b.jsx)("option",{value:"null",children:"All"}),Object(b.jsx)("option",{value:"true",children:"Friends"}),Object(b.jsx)("option",{value:"false",children:"Unfollowed"})]}),Object(b.jsx)("button",{type:"submit",disabled:t,children:"Find"})]})}})})})),ge=n(73),me=n(42),ve=n(80),xe=n.n(ve),_e=n(141),Se=n.n(_e),Ce=function(e){for(var t=e.totalItemsAmount,n=e.pageSize,r=e.currentPage,a=e.onPageNumberChange,i=e.numberOfPagesInOnePortion,c=void 0===i?8:i,o=(Object(A.a)(e,["totalItemsAmount","pageSize","currentPage","onPageNumberChange","numberOfPagesInOnePortion"]),Math.ceil(t/n)),u=[],l=1;l<=o;l++)u.push(l);var d=Math.ceil(o/c),j=Object(s.useState)(1),p=Object(me.a)(j,2),f=p[0],h=p[1],O=(f-1)*c+1,g=f*c;return Object(b.jsxs)("div",{className:xe.a.pagination,children:[f>1&&Object(b.jsx)("button",{onClick:function(){h(f-1)},children:"prev"}),u.filter((function(e){return e>=O&&e<=g})).map((function(e){return Object(b.jsxs)("span",{className:Se()(Object(ge.a)({},xe.a.selectedPage,r===e),xe.a.pageNumber),onClick:function(){a(e)},children:[e," "]},e)})),d>f&&Object(b.jsx)("button",{onClick:function(){h(f+1)},children:"next"})]})},we=n(77),Pe=n.n(we),Ue=n.p+"static/media/user-default.45338af4.png",Te=function(e){var t=e.user,n=e.followedUsersId,s=e.unFollowUserTC,r=e.followUserTC;Object(A.a)(e,["user","followedUsersId","unFollowUserTC","followUserTC"]);return Object(b.jsxs)("div",{children:[Object(b.jsxs)("span",{children:[Object(b.jsx)("div",{children:Object(b.jsx)(p.b,{to:"/Profile/"+t.id,children:Object(b.jsx)("img",{src:null!==t.photos.small?t.photos.small:Ue,className:Pe.a.photo,alt:"Users avatar"})})}),Object(b.jsx)("div",{children:t.followed?Object(b.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){s(t.id,!0)},children:"Unfollow"}):Object(b.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id,!0)},children:"Follow"})})]}),Object(b.jsxs)("span",{children:[Object(b.jsx)("div",{children:t.name}),Object(b.jsx)("div",{children:t.status})]}),Object(b.jsxs)("span",{children:[Object(b.jsx)("div",{children:"u.location.country"}),Object(b.jsx)("div",{children:"u.location.city"})]})]})},ye=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)(Oe,{onFilterChanged:e.onFilterChanged}),Object(b.jsx)(Ce,{totalItemsAmount:e.totalUsersAmount,pageSize:e.pageSize,currentPage:e.currentPage,onPageNumberChange:e.onPageNumberChange,numberOfPagesInOnePortion:8}),e.users.map((function(t){return Object(b.jsx)(Te,{user:t,followedUsersId:e.followedUsersId,followUserTC:e.followUserTC,unFollowUserTC:e.unFollowUserTC},t.id)}))]})},Ne=n.p+"static/media/Preloader3.dd13dbe9.gif",Ie=function(){return Object(b.jsx)("img",{className:Pe.a.preloader,src:Ne,alt:"preloader"})},Ae=n(145),ke=Object(Ae.a)((function(e){return e.usersPage.users}),(function(e){return e})),Ee=function(e){return e.usersPage.pageSize},Fe=function(e){return e.usersPage.totalUsersAmount},De=function(e){return e.usersPage.currentPage},Le=function(e){return e.usersPage.isFetching},Me=function(e){return e.usersPage.followedUsersId},Re=function(e){return e.usersPage.filter},ze=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).onPageNumberChange=function(t){var n=e.props,s=n.pageSize,r=n.filter;e.props.getUsersTC(t,s,r)},e.onFilterChanged=function(t){var n=e.props.pageSize;e.props.getUsersTC(1,n,t)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize,s=e.filter;this.props.getUsersTC(t,n,s)}},{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[this.props.isFetching?Object(b.jsx)(Ie,{}):"",Object(b.jsx)(ye,{totalUsersAmount:this.props.totalUsersAmount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,follow:this.props.follow,unfollow:this.props.unfollow,users:this.props.users,onPageNumberChange:this.onPageNumberChange,followedUsersIdAC:this.props.followedUsersIdAC,followedUsersId:this.props.followedUsersId,isFetching:this.props.isFetching,followUserTC:this.props.followUserTC,unFollowUserTC:this.props.unFollowUserTC,onFilterChanged:this.onFilterChanged})]})}}]),n}(r.a.Component),Be=Object(G.d)(Object(H.b)((function(e){return{users:ke(e),pageSize:Ee(e),totalUsersAmount:Fe(e),currentPage:De(e),isFetching:Le(e),followedUsersId:Me(e),filter:Re(e)}}),{follow:ue,unfollow:le,setCurrentPage:de,followedUsersIdAC:pe,getUsersTC:function(e,t,n){return function(){var s=Object(Y.a)(X.a.mark((function s(r){var a;return X.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r(je(!0)),r(be(n)),r(de(e)),s.next=5,te(e,t,n.term,n.friend);case 5:a=s.sent,r(je(!1)),r({type:"users/SET_USERS",users:a.items}),r({type:"users/SET_TOTAL_USERS_AMOUNT",totalAmount:a.totalCount});case 9:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},followUserTC:function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(pe(e,!0)),t.next=3,s=e,ee.post("follow/".concat(s),{}).then((function(e){return e.data}));case 3:0===t.sent.resultCode&&n(ue(e)),n(pe(e,!1));case 6:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}()},unFollowUserTC:function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(pe(e,!0)),t.next=3,s=e,ee.delete("follow/".concat(s)).then((function(e){return e.data}));case 3:0===t.sent.resultCode&&n(le(e)),n(pe(e,!1));case 6:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}()}}),V)(ze),We=n(78),He=n.n(We);var Ge=function(e){var t=Object(s.useState)(!1),n=Object(me.a)(t,2),r=n[0],a=n[1],i=Object(s.useState)(e.status),c=Object(me.a)(i,2),o=c[0],u=c[1];Object(s.useEffect)((function(){u(e.status)}),[e.status]);var l=function(){a(!0)};return Object(b.jsxs)("div",{className:He.a.status,children:[r?Object(b.jsx)("input",{value:o,onChange:function(e){var t=e.currentTarget.value;u(t)},onBlur:function(){a(!1),e.updateUserStatusTC(o)},onKeyPress:function(t){"Enter"===t.key&&(a(!1),e.updateUserStatusTC(o))},autoFocus:!0}):Object(b.jsx)("span",{onDoubleClick:l,children:o||e.status}),!o&&!e.status&&Object(b.jsx)("span",{onDoubleClick:l,children:"Status is empty"})]})},qe=function(e){return function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(e.profile)?Object(b.jsx)(Ie,{}):Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:He.a.descriptionBlock,children:[Object(b.jsx)("img",{src:null!==e.profile.photos.small?e.profile.photos.small:Ue,alt:"users avatar"}),Object(b.jsx)("div",{children:e.profile.fullName}),Object(b.jsx)("span",{children:"My status:"})," ",Object(b.jsx)(Ge,{status:e.status,updateUserStatusTC:e.updateUserStatusTC})]})})},Ve=n(142),Je=n.n(Ve),Ke={posts:[{id:1,message:"Hi, how are you?",likesCounter:15},{id:2,message:"Fine, thanks",likesCounter:25},{id:3,message:"WHOOP WHOOP!",likesCounter:48}],profile:{},status:""},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile/ADD_POST":var n={id:5,message:t.newPost,likesCounter:0};return Object(g.a)(Object(g.a)({},e),{},{posts:[].concat(Object(O.a)(e.posts),[n])});case"profile/SET_USERS-PROFILE":return Object(g.a)(Object(g.a)({},e),{},{profile:t.profile});case"profile/SET_USERS_STATUS":return Object(g.a)(Object(g.a)({},e),{},{status:t.status});default:return e}},Ye=function(e){return{type:"profile/SET_USERS_STATUS",status:e}},Ze=n(102),Qe=n.n(Ze),$e=n(143),et=n.n($e),tt=function(e){return Object(b.jsxs)("div",{className:et.a.item,children:[e.id+". ",e.message,Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:"likes "}),e.likesCounter]})]})},nt=r.a.memo((function(e){var t=Object(O.a)(e.posts).reverse().map((function(e){return Object(b.jsx)(tt,{message:e.message,likesCounter:e.likesCounter,id:e.id},Object(y.a)())}));return Object(b.jsxs)("div",{className:Qe.a.postsBlock,children:[Object(b.jsx)("h2",{children:"My posts"}),Object(b.jsx)(rt,{onSubmit:function(t){e.addPost(t.newPost)}}),Object(b.jsx)("div",{className:Qe.a.posts,children:t})]})})),st=R(20),rt=Object(I.a)({form:"newPost"})((function(e){return Object(b.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(b.jsx)(N.a,{name:"newPost",component:D,validate:[M,st]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{children:"Add post"})})]})})),at=Object(H.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){var n=function(e){return{type:"profile/ADD_POST",newPost:e}}(t);e(n)}}}))(nt),it=function(e){return Object(b.jsxs)("div",{className:Je.a.content,children:[Object(b.jsx)(qe,{profile:e.profile,status:e.status,updateUserStatusTC:e.updateUserStatusTC}),Object(b.jsx)(at,{})]})},ct=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;console.log(e),e||(e=this.props.authorizedUserId.toString())||this.props.history.push("/login"),this.props.showUserTC(+e),this.props.getUserStatusTC(+e)}},{key:"render",value:function(){return Object(b.jsx)(it,Object(g.a)(Object(g.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateUserStatusTC:this.props.updateUserStatusTC}))}}]),n}(r.a.Component),ot=Object(G.d)(Object(H.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.authSetting.id,isAuth:e.authSetting.isAuth}}),{showUserTC:function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){var s;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne(e);case 2:s=t.sent,n({type:"profile/SET_USERS-PROFILE",profile:s});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUserStatusTC:function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){var s;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se.getStatus(e);case 2:s=t.sent,n(Ye(s));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatusTC:function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se.updateStatus(e);case 2:0===t.sent.resultCode&&n(Ye(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),h.g,V)(ct),ut=n(103),lt=n.n(ut),dt=function(e){return Object(b.jsxs)("header",{className:lt.a.header,children:[Object(b.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/640px-React-icon.svg.png",alt:"logo"}),Object(b.jsx)("div",{className:lt.a.authBlock,children:e.isAuth?Object(b.jsxs)("div",{children:[e.login,Object(b.jsx)("button",{onClick:e.logOutTC,children:"Log out"})]}):Object(b.jsx)(p.b,{to:"/login",children:"Login"})})]})},jt=n(44),pt={email:null,id:null,login:null,isAuth:!1},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":var n=Object(g.a)(Object(g.a)({},e),t.data);return n;default:return e}},ft=function(e){return{type:"auth/SET_USER_DATA",data:e}},ht=function(){return function(){var e=Object(Y.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:0===(n=e.sent).resultCode&&t(ft({login:n.data.login,id:n.data.id,email:n.data.email,isAuth:!0}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ot=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)(dt,Object(g.a)({},this.props))}}]),n}(r.a.Component),gt=Object(H.b)((function(e){return{isAuth:e.authSetting.isAuth,login:e.authSetting.login}}),{logOutTC:function(){return function(){var e=Object(Y.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:0===e.sent.data.resultCode&&t(ft({login:null,id:null,email:null,isAuth:!1}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Ot),mt=Object(H.b)((function(e){return{isAuth:e.authSetting.isAuth}}),{loginTC:function(e,t,n){return function(){var s=Object(Y.a)(X.a.mark((function s(r){var a;return X.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,re(e,t,n);case 2:0===(a=s.sent).resultCode?r(ht()):a.messages[0].length>0&&r(Object(jt.a)("login",{_error:a.messages[0]}));case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(b.jsx)(h.a,{to:"/profile"}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"login"}),Object(b.jsx)(vt,{onSubmit:function(t){e.loginTC(t.email,t.password,t.rememberMe)}})]})})),vt=Object(I.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return Object(b.jsxs)("form",{onSubmit:t,children:[Object(b.jsx)("div",{children:Object(b.jsx)(N.a,{placeholder:"email",name:"email",component:L,validate:[M]})}),Object(b.jsx)("div",{children:Object(b.jsx)(N.a,{placeholder:"Password",name:"password",type:"password",component:L,validate:[M]})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(N.a,{component:L,name:"rememberMe",type:"checkbox"})," remember me"]}),n&&Object(b.jsx)("div",{className:E.a.errorMessage,children:n}),Object(b.jsx)("button",{children:"login"})]})})),xt=function(e){var t=Object(s.useState)(""),n=Object(me.a)(t,2),r=n[0],a=n[1],i=function(e){(function(e){return ee.put("profile/status",{status:e}).then((function(e){console.log(e.data)}))})(e).then((function(e){console.log("Your status was updated")})),a("")};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"My profile settings"}),Object(b.jsx)("input",{value:r,onChange:function(e){var t=e.currentTarget.value;a(t)}}),Object(b.jsx)("button",{onClick:function(){return i(r)},children:"put new status"}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:function(){se.updatePhoto().then((function(e){console.log("Your avatar was updated with"+e.data.small)}))},children:"set new photo"})})]})},_t={isInitialized:!1},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/SET_INITIALIZED_SUCCESS":var n=Object(g.a)(Object(g.a)({},e),{},{isInitialized:!0});return n;default:return e}},Ct={friends:[{id:1,name:"Alex",avatar:"https://i.pinimg.com/originals/2c/cf/78/2ccf78dd2564d2067e0203823fa66c8c.jpg"},{id:2,name:"Kate",avatar:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTai5liDn6mltiPfC7nIMC0a2UBVCSvzWwpdExj9YSGViP5EebCZjIwZpXFwos84J7OXzU&usqp=CAU"},{id:3,name:"Bob",avatar:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTEH-szSsbp1TB_yT-Vhi-7QCyjAnxhNqeu0Fb9tOPwtEKMgACnq0xoadGvbpgU9dUEAlc&usqp=CAU"},{id:4,name:"Hank",avatar:"https://www.pngkey.com/png/detail/180-1800743_hank-hill.png"}]},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct;return e},Pt=n(144),Ut=n(134),Tt=Object(G.c)({profilePage:Xe,dialogsPage:v,friendsBar:wt,usersPage:oe,authSetting:bt,app:St,form:Ut.a}),yt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.d,Nt=Object(G.e)(Tt,yt(Object(G.a)(Pt.a)));window.store=Nt;var It=Nt,At=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeTC()}},{key:"render",value:function(){return this.props.isInitialized?Object(b.jsxs)("div",{className:"app-wrapper",children:[Object(b.jsx)(gt,{}),Object(b.jsx)(f,{}),Object(b.jsx)("div",{className:"app-wrapper-content",children:Object(b.jsxs)(h.d,{children:[Object(b.jsx)(h.b,{path:"/profile/:userId?",render:function(){return Object(b.jsx)(ot,{})}}),Object(b.jsx)(h.b,{path:"/dialogs",render:function(){return Object(b.jsx)(J,{})}}),Object(b.jsx)(h.b,{path:"/users",render:function(){return Object(b.jsx)(Be,{})}}),Object(b.jsx)(h.b,{path:"/login",render:function(){return Object(b.jsx)(mt,{})}}),Object(b.jsx)(h.b,{path:"/settings",render:function(){return Object(b.jsx)(xt,{})}})]})})]}):Object(b.jsx)(Ie,{})}}]),n}(r.a.Component),kt=Object(G.d)(h.g,Object(H.b)((function(e){return{isInitialized:e.app.isInitialized}}),{initializeTC:function(){return function(e){var t=e(ht());Promise.all([t]).then((function(){e({type:"app/SET_INITIALIZED_SUCCESS"})}))}}}))(At),Et=function(){return Object(b.jsx)(p.a,{children:Object(b.jsx)(H.a,{store:It,children:Object(b.jsx)(kt,{})})})};i.a.render(Object(b.jsx)(Et,{}),document.getElementById("root"))},49:function(e,t,n){e.exports={formControl:"formControl_formControl__156bY",error:"formControl_error__jp-eW",errorMessage:"formControl_errorMessage__2mE6J"}},59:function(e,t,n){e.exports={Dialogs:"Dialogs_Dialogs__j2i-j",DialogsItems:"Dialogs_DialogsItems__lAOPW",active:"Dialogs_active__1ShYH",messages:"Dialogs_messages__1r81N"}},77:function(e,t,n){e.exports={photo:"Users_photo__XcAe_",preloader:"Users_preloader__3JRwf"}},78:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__2oWUq",status:"ProfileInfo_status__3ktjO"}},80:function(e,t,n){e.exports={pagination:"Pagination_pagination__11fPO",pageNumber:"Pagination_pageNumber__3w8gv",selectedPage:"Pagination_selectedPage__1NRN1"}}},[[301,1,2]]]);
//# sourceMappingURL=main.b79c513e.chunk.js.map