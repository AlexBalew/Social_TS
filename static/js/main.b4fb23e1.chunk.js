(this.webpackJsonpsnts=this.webpackJsonpsnts||[]).push([[0],{102:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__3aeho",posts:"MyPosts_posts__2Byu-"}},103:function(e,t,n){e.exports={header:"Header_header__39XS2",authBlock:"Header_authBlock__3JFA1"}},135:function(e,t,n){e.exports={Dialogs:"DialogItem_Dialogs__2c_QI",DialogsItems:"DialogItem_DialogsItems__3zAIO",dialog:"DialogItem_dialog__1wSkF"}},136:function(e,t,n){e.exports={messages:"MessageItem_messages__1BV8S"}},142:function(e,t,n){e.exports={content:"Profile_content__6pham"}},143:function(e,t,n){e.exports={item:"Post_item__3c7es"}},144:function(e,t,n){e.exports={set:"Settings_set__3Diid"}},15:function(e,t,n){e.exports={nav:"Nav_nav__3FUyC",item:"Nav_item__3iLxv",activeLink:"Nav_activeLink__V6QwG"}},177:function(e,t,n){},178:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),a=n(70),i=n.n(a),c=(n(177),n(33)),o=n(34),u=n(38),l=n(36),d=(n(178),n(15)),j=n.n(d),p=n(14),f=n(1),b=function(){return Object(f.jsxs)("nav",{className:j.a.nav,children:[Object(f.jsx)("div",{className:j.a.item,children:Object(f.jsx)(p.b,{to:"/login",activeClassName:j.a.activeLink,children:"Login"})}),Object(f.jsx)("div",{className:j.a.item,children:Object(f.jsx)(p.b,{to:"/profile",activeClassName:j.a.activeLink,children:"Profile"})}),Object(f.jsx)("div",{className:"".concat(j.a.item," ").concat(j.a.active),children:Object(f.jsx)(p.b,{to:"/dialogs",activeClassName:j.a.activeLink,children:"Messages"})}),Object(f.jsx)("div",{className:j.a.item,children:Object(f.jsx)(p.b,{to:"/news",activeClassName:j.a.activeLink,children:"News"})}),Object(f.jsx)("div",{className:j.a.item,children:Object(f.jsx)(p.b,{to:"/music",activeClassName:j.a.activeLink,children:"Music"})}),Object(f.jsx)("div",{className:j.a.item,children:Object(f.jsx)(p.b,{to:"/settings",activeClassName:j.a.activeLink,children:"Settings"})}),Object(f.jsx)("div",{className:j.a.item,children:Object(f.jsx)(p.b,{to:"/friends",activeClassName:j.a.activeLink,children:"Friends"})}),Object(f.jsx)("div",{className:j.a.item,children:Object(f.jsx)(p.b,{to:"/users",activeClassName:j.a.activeLink,children:"Users"})})]})},h=n(11),O=n(37),g=n(3),m={dialogs:[{id:1,name:"Alex"},{id:2,name:"Kate"},{id:3,name:"Bob"},{id:4,name:"Michael"},{id:5,name:"Kostya"}],messages:[{id:1,message:"Hi there"},{id:2,message:"Hello bud"},{id:3,message:"Howdy"},{id:4,message:"Greetings!"},{id:5,message:"Did you sign up for Stalker 2?"}]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialog/SEND_MESSAGE":var n=t.newDialogMessage;return Object(g.a)(Object(g.a)({},e),{},{messages:[].concat(Object(O.a)(e.messages),[{id:6,message:n}])});default:return e}},x=n(59),_=n.n(x),C=n(135),S=n.n(C),w=function(e){var t="/dialogs/".concat(e.id);return Object(f.jsx)("div",{className:S.a.dialog,children:Object(f.jsxs)(p.b,{to:t,children:[" ",e.name]})})},P=n(136),T=n.n(P),U=function(e){return Object(f.jsx)("div",{className:T.a.message,children:e.message})},y=n(303),A=n(132),k=n(133),I=n(28),N=n(49),E=n.n(N),D=function(e){e.input;var t=e.meta,n=t.touched,r=t.error,s=e.children,a=(Object(I.a)(e,["input","meta","children"]),n&&r);return Object(f.jsxs)("div",{className:E.a.formControl+" "+(a?E.a.error:""),children:[Object(f.jsx)("div",{children:s}),a&&Object(f.jsx)("div",{className:E.a.errorMessage,children:r})]})},F=function(e){var t=e.input,n=(e.meta,e.children,Object(I.a)(e,["input","meta","children"]));return Object(f.jsx)(D,Object(g.a)(Object(g.a)({},e),{},{children:Object(f.jsx)("textarea",Object(g.a)(Object(g.a)({},t),n))}))},L=function(e){var t=e.input,n=(e.meta,e.children,Object(I.a)(e,["input","meta","children"]));return Object(f.jsx)(D,Object(g.a)(Object(g.a)({},e),{},{children:Object(f.jsx)("input",Object(g.a)(Object(g.a)({},t),n))}))},M=function(e){if(!e){var t="The field is empty";return console.log(t),t}},R=function(e){return function(t){if(!(t&&t.toString().length<=e)){var n="".concat(e," is a max number of symbols here");return console.log(n),n}}},z=function(e){var t=e.dialogsPage.dialogs.map((function(e){return Object(f.jsx)(w,{name:e.name,id:e.id},Object(y.a)())})),n=e.dialogsPage.messages.map((function(e){return Object(f.jsx)(U,{message:e.message,id:e.id},Object(y.a)())}));return Object(f.jsxs)("div",{className:_.a.Dialogs,children:[Object(f.jsx)("div",{className:_.a.DialogsItems+""+_.a.active,children:t}),Object(f.jsxs)("div",{className:_.a.messages,children:[Object(f.jsx)("div",{children:n}),Object(f.jsx)("div",{children:Object(f.jsx)(B,{onSubmit:function(t){e.sendMessage(t.newDialogMessage)}})})]})]})},H=R(10),B=Object(k.a)({form:"dialogAddMessageForm"})((function(e){return Object(f.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(f.jsx)("div",{children:Object(f.jsx)(A.a,{placeholder:"insert your message",name:"newDialogMessage",component:F,validate:[M,H]})}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{children:"Send"})})]})})),W=n(12),G=n(9),q=function(e){return{isAuth:e.authSetting.isAuth}};function V(e){return Object(W.b)(q,{})((function(t){t.isAuth;var n=Object(I.a)(t,["isAuth"]);return t.isAuth?Object(f.jsx)(e,Object(g.a)({},n)):Object(f.jsx)(h.a,{to:"/login"})}))}var J=Object(G.d)(Object(W.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{sendMessage:function(t){e(function(e){return{type:"dialog/SEND_MESSAGE",newDialogMessage:e}}(t))}}})),V)(z),K=n(10),X=n.n(K),Y=n(18),Z=n(138),Q=n.n(Z).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"ae005362-3cd1-4901-a9c5-790f2698eec1"}}),$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Q.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)+(null===r?"":"".concat(r))).then((function(e){return e.data}))},ee=function(e){return te.getProfile(e)},te={getProfile:function(e){return Q.get("profile/"+e).then((function(e){return e.data}))},getStatus:function(e){return Q.get("profile/status/"+e).then((function(e){return e.data}))},updateStatus:function(e){return Q.put("profile/status/",{status:e}).then((function(e){return e.data}))},updatePhoto:function(e){var t=new FormData;return t.append("image",e),Q.put("profile/photo/",t,{headers:{"Content-type":"multipart/form-data"}}).then((function(e){return e.data}))}},ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Q.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},re=function(){return Q.get("auth/me").then((function(e){return e.data}))},se=function(){return Q.delete("auth/login")},ae=function(){return Q.get("security/get-captcha-url")},ie={users:[],pageSize:8,totalUsersAmount:0,currentPage:1,isFetching:!1,followedUsersId:[],filter:{term:"",friend:null}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/FOLLOW":return Object(g.a)(Object(g.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(g.a)(Object(g.a)({},e),{},{followed:!0}):e}))});case"users/UNFOLLOW":return Object(g.a)(Object(g.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(g.a)(Object(g.a)({},e),{},{followed:!1}):e}))});case"users/SET_USERS":return Object(g.a)(Object(g.a)({},e),{},{users:t.users});case"users/SET_FILTER":return Object(g.a)(Object(g.a)({},e),{},{filter:t.payload});case"users/SET_CURRENT_PAGE":return Object(g.a)(Object(g.a)({},e),{},{currentPage:t.currentPage});case"users/SET_TOTAL_USERS_AMOUNT":return Object(g.a)(Object(g.a)({},e),{},{totalUsersAmount:t.totalAmount});case"users/SWITCH_PRELOADER":return Object(g.a)(Object(g.a)({},e),{},{isFetching:t.isFetching});case"users/SWITCH_IS_FOLLOW":return Object(g.a)(Object(g.a)({},e),{},{followedUsersId:t.isFetching?[].concat(Object(O.a)(e.followedUsersId),[t.id]):e.followedUsersId.filter((function(e){return e!==t.id}))});default:return e}},oe=function(e){return{type:"users/FOLLOW",userID:e}},ue=function(e){return{type:"users/UNFOLLOW",userID:e}},le=function(e){return{type:"users/SET_CURRENT_PAGE",currentPage:e}},de=function(e){return{type:"users/SWITCH_PRELOADER",isFetching:e}},je=function(e,t){return{type:"users/SWITCH_IS_FOLLOW",id:e,isFetching:t}},pe=function(e){return{type:"users/SET_FILTER",payload:e}},fe=n(60),be=function(e){return{}},he=s.a.memo((function(e){return Object(f.jsx)("div",{children:Object(f.jsx)(fe.c,{initialValues:{term:"",friend:null},validate:be,onSubmit:function(t,n){var r=n.setSubmitting;e.onFilterChanged(t),r(!1)},children:function(e){var t=e.isSubmitting;return Object(f.jsxs)(fe.b,{children:[Object(f.jsx)(fe.a,{type:"text",name:"term"}),Object(f.jsxs)(fe.a,{name:"friend",as:"select",children:[Object(f.jsx)("option",{value:"null",children:"All"}),Object(f.jsx)("option",{value:"true",children:"Friends"}),Object(f.jsx)("option",{value:"false",children:"Unfollowed"})]}),Object(f.jsx)("button",{type:"submit",disabled:t,children:"Find"})]})}})})})),Oe=n(73),ge=n(42),me=n(80),ve=n.n(me),xe=n(141),_e=n.n(xe),Ce=function(e){for(var t=e.totalItemsAmount,n=e.pageSize,s=e.currentPage,a=e.onPageNumberChange,i=e.numberOfPagesInOnePortion,c=void 0===i?8:i,o=(Object(I.a)(e,["totalItemsAmount","pageSize","currentPage","onPageNumberChange","numberOfPagesInOnePortion"]),Math.ceil(t/n)),u=[],l=1;l<=o;l++)u.push(l);var d=Math.ceil(o/c),j=Object(r.useState)(1),p=Object(ge.a)(j,2),b=p[0],h=p[1],O=(b-1)*c+1,g=b*c;return Object(f.jsxs)("div",{className:ve.a.pagination,children:[b>1&&Object(f.jsx)("button",{onClick:function(){h(b-1)},children:"prev"}),u.filter((function(e){return e>=O&&e<=g})).map((function(e){return Object(f.jsxs)("span",{className:_e()(Object(Oe.a)({},ve.a.selectedPage,s===e),ve.a.pageNumber),onClick:function(){a(e)},children:[e," "]},e)})),d>b&&Object(f.jsx)("button",{onClick:function(){h(b+1)},children:"next"})]})},Se=n(77),we=n.n(Se),Pe=n.p+"static/media/user-default.45338af4.png",Te=function(e){var t=e.user,n=e.followedUsersId,r=e.unFollowUserTC,s=e.followUserTC;Object(I.a)(e,["user","followedUsersId","unFollowUserTC","followUserTC"]);return Object(f.jsxs)("div",{children:[Object(f.jsxs)("span",{children:[Object(f.jsx)("div",{children:Object(f.jsx)(p.b,{to:"/Profile/"+t.id,children:Object(f.jsx)("img",{src:null!==t.photos.small?t.photos.small:Pe,className:we.a.photo,alt:"Users avatar"})})}),Object(f.jsx)("div",{children:t.followed?Object(f.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id,!0)},children:"Unfollow"}):Object(f.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){s(t.id,!0)},children:"Follow"})})]}),Object(f.jsxs)("span",{children:[Object(f.jsx)("div",{children:t.name}),Object(f.jsx)("div",{children:t.status})]}),Object(f.jsxs)("span",{children:[Object(f.jsx)("div",{children:"u.location.country"}),Object(f.jsx)("div",{children:"u.location.city"})]})]})},Ue=function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)(he,{onFilterChanged:e.onFilterChanged}),Object(f.jsx)(Ce,{totalItemsAmount:e.totalUsersAmount,pageSize:e.pageSize,currentPage:e.currentPage,onPageNumberChange:e.onPageNumberChange,numberOfPagesInOnePortion:8}),e.users.map((function(t){return Object(f.jsx)(Te,{user:t,followedUsersId:e.followedUsersId,followUserTC:e.followUserTC,unFollowUserTC:e.unFollowUserTC},t.id)}))]})},ye=n.p+"static/media/Preloader3.dd13dbe9.gif",Ae=function(){return Object(f.jsx)("img",{className:we.a.preloader,src:ye,alt:"preloader"})},ke=n(146),Ie=Object(ke.a)((function(e){return e.usersPage.users}),(function(e){return e})),Ne=function(e){return e.usersPage.pageSize},Ee=function(e){return e.usersPage.totalUsersAmount},De=function(e){return e.usersPage.currentPage},Fe=function(e){return e.usersPage.isFetching},Le=function(e){return e.usersPage.followedUsersId},Me=function(e){return e.usersPage.filter},Re=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).onPageNumberChange=function(t){var n=e.props,r=n.pageSize,s=n.filter;e.props.getUsersTC(t,r,s)},e.onFilterChanged=function(t){var n=e.props.pageSize;e.props.getUsersTC(1,n,t)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize,r=e.filter;this.props.getUsersTC(t,n,r)}},{key:"render",value:function(){return Object(f.jsxs)(f.Fragment,{children:[this.props.isFetching?Object(f.jsx)(Ae,{}):"",Object(f.jsx)(Ue,{totalUsersAmount:this.props.totalUsersAmount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,follow:this.props.follow,unfollow:this.props.unfollow,users:this.props.users,onPageNumberChange:this.onPageNumberChange,followedUsersIdAC:this.props.followedUsersIdAC,followedUsersId:this.props.followedUsersId,isFetching:this.props.isFetching,followUserTC:this.props.followUserTC,unFollowUserTC:this.props.unFollowUserTC,onFilterChanged:this.onFilterChanged})]})}}]),n}(s.a.Component),ze=Object(G.d)(Object(W.b)((function(e){return{users:Ie(e),pageSize:Ne(e),totalUsersAmount:Ee(e),currentPage:De(e),isFetching:Fe(e),followedUsersId:Le(e),filter:Me(e)}}),{follow:oe,unfollow:ue,setCurrentPage:le,followedUsersIdAC:je,getUsersTC:function(e,t,n){return function(){var r=Object(Y.a)(X.a.mark((function r(s){var a;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s(de(!0)),s(pe(n)),s(le(e)),r.next=5,$(e,t,n.term,n.friend);case 5:a=r.sent,s(de(!1)),s({type:"users/SET_USERS",users:a.items}),s({type:"users/SET_TOTAL_USERS_AMOUNT",totalAmount:a.totalCount});case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},followUserTC:function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(je(e,!0)),t.next=3,r=e,Q.post("follow/".concat(r),{}).then((function(e){return e.data}));case 3:0===t.sent.resultCode&&n(oe(e)),n(je(e,!1));case 6:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},unFollowUserTC:function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(je(e,!0)),t.next=3,r=e,Q.delete("follow/".concat(r)).then((function(e){return e.data}));case 3:0===t.sent.resultCode&&n(ue(e)),n(je(e,!1));case 6:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()}}),V)(Re),He=n(78),Be=n.n(He);var We=function(e){var t=Object(r.useState)(!1),n=Object(ge.a)(t,2),s=n[0],a=n[1],i=Object(r.useState)(e.status),c=Object(ge.a)(i,2),o=c[0],u=c[1];Object(r.useEffect)((function(){u(e.status)}),[e.status]);var l=function(){a(!0)};return Object(f.jsxs)("div",{className:Be.a.status,children:[s?Object(f.jsx)("input",{value:o,onChange:function(e){var t=e.currentTarget.value;u(t)},onBlur:function(){a(!1),e.updateUserStatusTC(o)},onKeyPress:function(t){"Enter"===t.key&&(a(!1),e.updateUserStatusTC(o))},autoFocus:!0}):Object(f.jsx)("span",{onDoubleClick:l,children:o||e.status}),!o&&!e.status&&Object(f.jsx)("span",{onDoubleClick:l,children:"Status is empty"})]})},Ge=function(e){if(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(e.profile))return Object(f.jsx)(Ae,{});return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:Be.a.descriptionBlock,children:[Object(f.jsx)("img",{src:null!==e.profile.photos.small?e.profile.photos.small:Pe,alt:"users avatar"}),!e.isOwner&&Object(f.jsx)("input",{type:"file",onChange:function(t){if(t.target.files.length){var n=t.target.files[0];e.savePhotoTC(n)}}}),Object(f.jsx)("div",{children:e.profile.fullName}),Object(f.jsx)("span",{children:"My status:"})," ",Object(f.jsx)(We,{status:e.status,updateUserStatusTC:e.updateUserStatusTC})]})})},qe=n(142),Ve=n.n(qe),Je={posts:[{id:1,message:"Hi, how are you?",likesCounter:15},{id:2,message:"Fine, thanks",likesCounter:25},{id:3,message:"WHOOP WHOOP!",likesCounter:48}],profile:{},status:""},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile/ADD_POST":var n={id:5,message:t.newPost,likesCounter:0};return Object(g.a)(Object(g.a)({},e),{},{posts:[].concat(Object(O.a)(e.posts),[n])});case"profile/SET_USERS-PROFILE":return Object(g.a)(Object(g.a)({},e),{},{profile:t.profile});case"profile/SET_USERS_STATUS":return Object(g.a)(Object(g.a)({},e),{},{status:t.status});case"profile/UPDATE_PHOTO":return Object(g.a)(Object(g.a)({},e),{},{profile:Object(g.a)(Object(g.a)({},e.profile),{},{photos:t.photos})});default:return e}},Xe=function(e){return{type:"profile/SET_USERS_STATUS",status:e}},Ye=n(102),Ze=n.n(Ye),Qe=n(143),$e=n.n(Qe),et=function(e){return Object(f.jsxs)("div",{className:$e.a.item,children:[e.id+". ",e.message,Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{children:"likes "}),e.likesCounter]})]})},tt=s.a.memo((function(e){var t=Object(O.a)(e.posts).reverse().map((function(e){return Object(f.jsx)(et,{message:e.message,likesCounter:e.likesCounter,id:e.id},Object(y.a)())}));return Object(f.jsxs)("div",{className:Ze.a.postsBlock,children:[Object(f.jsx)("h2",{children:"My posts"}),Object(f.jsx)(rt,{onSubmit:function(t){e.addPost(t.newPost)}}),Object(f.jsx)("div",{className:Ze.a.posts,children:t})]})})),nt=R(20),rt=Object(k.a)({form:"newPost"})((function(e){return Object(f.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(f.jsx)(A.a,{name:"newPost",component:F,validate:[M,nt]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{children:"Add post"})})]})})),st=Object(W.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){var n=function(e){return{type:"profile/ADD_POST",newPost:e}}(t);e(n)}}}))(tt),at=function(e){return Object(f.jsxs)("div",{className:Ve.a.content,children:[Object(f.jsx)(Ge,{profile:e.profile,status:e.status,updateUserStatusTC:e.updateUserStatusTC,isOwner:e.isOwner,savePhotoTC:e.savePhotoTC}),Object(f.jsx)(st,{})]})},it=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;console.log(e),e||(e=this.props.authorizedUserId.toString())||this.props.history.push("/login"),this.props.showUserTC(+e),this.props.getUserStatusTC(+e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(f.jsx)(at,Object(g.a)(Object(g.a)({},this.props),{},{isOwner:!!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateUserStatusTC:this.props.updateUserStatusTC,savePhotoTC:this.props.savePhotoTC}))}}]),n}(s.a.Component),ct=Object(G.d)(Object(W.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.authSetting.id,isAuth:e.authSetting.isAuth}}),{showUserTC:function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){var r;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee(e);case 2:r=t.sent,n({type:"profile/SET_USERS-PROFILE",profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUserStatusTC:function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){var r;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te.getStatus(e);case 2:r=t.sent,n(Xe(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatusTC:function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te.updateStatus(e);case 2:0===t.sent.resultCode&&n(Xe(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhotoTC:function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){var r;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te.updatePhoto(e);case 2:0===(r=t.sent).resultCode&&n({type:"profile/UPDATE_PHOTO",photos:r.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),h.g,V)(it),ot=n(103),ut=n.n(ot),lt=function(e){return Object(f.jsxs)("header",{className:ut.a.header,children:[Object(f.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/640px-React-icon.svg.png",alt:"logo"}),Object(f.jsx)("div",{className:ut.a.authBlock,children:e.isAuth?Object(f.jsxs)("div",{children:[e.login,Object(f.jsx)("button",{onClick:e.logOutTC,children:"Log out"})]}):Object(f.jsx)(p.b,{to:"/login",children:"Login"})})]})},dt=n(44),jt={email:null,id:null,login:null,isAuth:!1,captchaUrl:null},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":var n=Object(g.a)(Object(g.a)({},e),t.data);return n;case"auth/GET_CAPTCHA":return Object(g.a)(Object(g.a)({},e),{},{captchaUrl:t.url});default:return e}},ft=function(e){return{type:"auth/SET_USER_DATA",data:e}},bt=function(){return function(){var e=Object(Y.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:0===(n=e.sent).resultCode&&t(ft({login:n.data.login,id:n.data.id,email:n.data.email,isAuth:!0,captchaUrl:null}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ht=function(){return function(){var e=Object(Y.a)(X.a.mark((function e(t){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:(n=e.sent).data.url&&(r=n.data.url,t({type:"auth/GET_CAPTCHA",url:r}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ot=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)(lt,Object(g.a)({},this.props))}}]),n}(s.a.Component),gt=Object(W.b)((function(e){return{isAuth:e.authSetting.isAuth,login:e.authSetting.login}}),{logOutTC:function(){return function(){var e=Object(Y.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:0===e.sent.data.resultCode&&t(ft({login:null,id:null,email:null,isAuth:!1,captchaUrl:null}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Ot),mt=Object(W.b)((function(e){return{isAuth:e.authSetting.isAuth,url:e.authSetting.captchaUrl}}),{loginTC:function(e,t,n){return function(){var r=Object(Y.a)(X.a.mark((function r(s){var a;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ne(e,t,n);case 2:0===(a=r.sent).resultCode?s(bt()):(10===a.resultCode&&s(ht()),a.messages[0].length>0&&s(Object(dt.a)("login",{_error:a.messages[0]})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(f.jsx)(h.a,{to:"/profile"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h2",{children:"Hello there!"}),Object(f.jsx)(vt,{onSubmit:function(t){e.loginTC(t.email,t.password,t.rememberMe)}})]})})),vt=Object(k.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:["To log in, please, get registration ",Object(f.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",rel:"noreferrer",children:"here"})]}),Object(f.jsx)("p",{children:"or use these test account credentials:"}),Object(f.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(f.jsx)("p",{children:"Password: free"})]}),Object(f.jsxs)("form",{onSubmit:t,children:[Object(f.jsx)("div",{children:Object(f.jsx)(A.a,{placeholder:"email",name:"email",component:L,validate:[M]})}),Object(f.jsx)("div",{children:Object(f.jsx)(A.a,{placeholder:"Password",name:"password",type:"password",component:L,validate:[M]})}),Object(f.jsxs)("div",{children:[Object(f.jsx)(A.a,{component:L,name:"rememberMe",type:"checkbox"})," remember me"]}),n&&Object(f.jsx)("div",{className:E.a.errorMessage,children:n}),Object(f.jsx)("button",{children:"login"})]})]})})),xt=n(144),_t=n.n(xt),Ct=function(e){var t=Object(r.useState)(""),n=Object(ge.a)(t,2),s=n[0],a=n[1],i=function(e){(function(e){return Q.put("profile/status",{status:e}).then((function(e){console.log(e.data)}))})(e).then((function(e){console.log("Your status was updated")})),a("")};return Object(f.jsxs)("div",{className:_t.a.set,children:[Object(f.jsx)("h3",{children:"My profile settings"}),Object(f.jsx)("input",{value:s,onChange:function(e){var t=e.currentTarget.value;a(t)}}),Object(f.jsx)("button",{onClick:function(){return i(s)},children:"put new status"}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{onClick:function(){},children:"set new photo"})})]})},St={isInitialized:!1},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/SET_INITIALIZED_SUCCESS":var n=Object(g.a)(Object(g.a)({},e),{},{isInitialized:!0});return n;default:return e}},Pt={friends:[{id:1,name:"Alex",avatar:"https://i.pinimg.com/originals/2c/cf/78/2ccf78dd2564d2067e0203823fa66c8c.jpg"},{id:2,name:"Kate",avatar:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTai5liDn6mltiPfC7nIMC0a2UBVCSvzWwpdExj9YSGViP5EebCZjIwZpXFwos84J7OXzU&usqp=CAU"},{id:3,name:"Bob",avatar:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTEH-szSsbp1TB_yT-Vhi-7QCyjAnxhNqeu0Fb9tOPwtEKMgACnq0xoadGvbpgU9dUEAlc&usqp=CAU"},{id:4,name:"Hank",avatar:"https://www.pngkey.com/png/detail/180-1800743_hank-hill.png"}]},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return e},Ut=n(145),yt=n(134),At=Object(G.c)({profilePage:Ke,dialogsPage:v,friendsBar:Tt,usersPage:ce,authSetting:pt,app:wt,form:yt.a}),kt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.d,It=Object(G.e)(At,kt(Object(G.a)(Ut.a)));window.store=It;var Nt=It,Et=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeTC()}},{key:"render",value:function(){return this.props.isInitialized?Object(f.jsxs)("div",{className:"app-wrapper",children:[Object(f.jsx)(gt,{}),Object(f.jsxs)("div",{className:"app-wrapper-content",children:[Object(f.jsx)(b,{}),Object(f.jsxs)(h.d,{children:[Object(f.jsx)(h.b,{path:"/profile/:userId?",render:function(){return Object(f.jsx)(ct,{})}}),Object(f.jsx)(h.b,{path:"/dialogs",render:function(){return Object(f.jsx)(J,{})}}),Object(f.jsx)(h.b,{path:"/users",render:function(){return Object(f.jsx)(ze,{})}}),Object(f.jsx)(h.b,{path:"/login",render:function(){return Object(f.jsx)(mt,{})}}),Object(f.jsx)(h.b,{path:"/settings",render:function(){return Object(f.jsx)(Ct,{})}})]})]})]}):Object(f.jsx)(Ae,{})}}]),n}(s.a.Component),Dt=Object(G.d)(h.g,Object(W.b)((function(e){return{isInitialized:e.app.isInitialized}}),{initializeTC:function(){return function(e){var t=e(bt());Promise.all([t]).then((function(){e({type:"app/SET_INITIALIZED_SUCCESS"})}))}}}))(Et),Ft=function(){return Object(f.jsx)(p.a,{children:Object(f.jsx)(W.a,{store:Nt,children:Object(f.jsx)(Dt,{})})})};i.a.render(Object(f.jsx)(Ft,{}),document.getElementById("root"))},49:function(e,t,n){e.exports={formControl:"formControl_formControl__156bY",error:"formControl_error__jp-eW",errorMessage:"formControl_errorMessage__2mE6J"}},59:function(e,t,n){e.exports={Dialogs:"Dialogs_Dialogs__j2i-j",DialogsItems:"Dialogs_DialogsItems__lAOPW",active:"Dialogs_active__1ShYH",messages:"Dialogs_messages__1r81N"}},77:function(e,t,n){e.exports={photo:"Users_photo__XcAe_",preloader:"Users_preloader__3JRwf"}},78:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__2oWUq",status:"ProfileInfo_status__3ktjO"}},80:function(e,t,n){e.exports={pagination:"Pagination_pagination__11fPO",pageNumber:"Pagination_pageNumber__3w8gv",selectedPage:"Pagination_selectedPage__1NRN1"}}},[[302,1,2]]]);
//# sourceMappingURL=main.b4fb23e1.chunk.js.map